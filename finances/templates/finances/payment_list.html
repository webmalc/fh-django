{% extends 'finances/layout.html' %}
{% load gravatar %}
{% block content %}

    <div class="well">
        <div class="row">
            <div class="col-md-10">todo: filters</div>
            <div class="col-md-2 text-right">
                <a href="{% url 'finances:payment_add' %}" class="btn btn-success">
                    <i class="fa fa-plus-circle"></i>
                    Add payment
                </a>
            </div>
        </div>
    </div>

    {% if object_list|length %}
        <table class="table table-striped table-hover">

            {% include 'partials/thead.html' with thead=thead link='finances:payments_list' %}

            <tbody>
            {% for payment in object_list %}
                <tr class="{{ payment.is_incoming|yesno:"success," }}">
                    <td>
                        {% for tag in payment.tags.all %}
                            <span class="tag label label-info">{{ tag }}</span>&nbsp;
                        {% endfor %}
                    </td>
                    <td class="text-right {{ payment.is_incoming|yesno:"text-success," }}">
                        {{ payment.amount }}
                    </td>
                    <td>{{ payment.date }}</td>
                    <td class="text-center">
                        {% if payment.is_incoming %}<i class="fa fa-check text-success"></i>{% endif %}
                    </td>
                    <td class="text-center">
                        <img src="{% gravatar_url payment.created_by|default:'' 24 %}"
                             title="{{ payment.created_by|default:"anonym" }}" data-toggle="tooltip"
                             data-placement="left"
                             class="img-circle">
                    </td>
                    <td class="text-right">
                        {% if perms.finances.change_payment %}
                        <a href="{% url 'finances:payment_update' payment.id %}" title="Edit payment"
                           data-toggle="tooltip" data-placement="top" class="btn btn-xs btn-success">
                            <i class="fa fa-pencil-square-o"></i>
                        </a>
                        {% endif %}
                        {% if perms.finances.delete_payment %}
                        <a href="{% url 'finances:payment_delete' payment.id %}" class="btn btn-xs btn-danger"
                           title="Delete payment" data-toggle="tooltip" data-placement="top"><i class="fa fa-trash"></i>
                        </a>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

        {% include 'partials/pagination.html' with link="finances:payments_list" %}

    {% else %}
        <div class="alert alert-warning">
            <i class="fa fa-exclamation-circle"></i> Payments not found.
        </div>
    {% endif %}
{% endblock %}