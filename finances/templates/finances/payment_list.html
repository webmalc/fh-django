{% extends 'finances/layout.html' %}
{% load gravatar %}
{% block content %}

    <div class="well">
        <div class="row">
            <div class="col-md-10">todo: filters</div>
            <div class="col-md-2 text-right">
                <a href="{% url 'finances:payment_add' %}" class="btn btn-success">
                    <i class="fa fa-plus-circle"></i>
                    Add payment
                </a>
            </div>
        </div>
    </div>

    {% if object_list|length %}
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th>Tags</th>
                <th class="td-sm text-right">Amount</th>
                <th class="td-md">Date</th>
                <th class="td-xs text-center">In</th>
                <th class="td-sm text-center">User</th>
                <th class="td-sm text-right"></th>
            </tr>
            </thead>
            <tbody>
            {% for payment in object_list %}
                <tr class="{{ payment.is_incoming|yesno:"success," }}">
                    <td>
                        {% for tag in payment.tags.all %}
                            <span class="tag label label-info">{{ tag }}</span>&nbsp;
                        {% endfor %}
                    </td>
                    <td class="text-right {{ payment.is_incoming|yesno:"text-success," }}">
                        {{ payment.amount }}
                    </td>
                    <td>{{ payment.date }}</td>
                    <td class="text-center">
                        {% if payment.is_incoming %}<i class="fa fa-check text-success"></i>{% endif %}
                    </td>
                    <td class="text-center">
                        <img src="{% gravatar_url payment.created_by|default:'' 24 %}"
                             title="{{ payment.created_by|default:"anonym" }}" data-toggle="tooltip"
                             data-placement="left"
                             class="img-circle">
                    </td>
                    <td class="text-right">
                        <a href="{% url 'finances:payment_update' payment.id %}" title="Edit payment"
                           data-toggle="tooltip" data-placement="top" class="btn btn-xs btn-success">
                            <i class="fa fa-pencil-square-o"></i>
                        </a>
                        <a href="{% url 'finances:payment_delete' payment.id %}" class="btn btn-xs btn-danger"
                           title="Delete payment" data-toggle="tooltip" data-placement="top"><i class="fa fa-trash"></i></a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

        {% if is_paginated %}
        <nav class="text-center">
            <ul class="pagination">
                {% if page_obj.has_previous %}
                    <li>
                        <a href="{% url 'finances:payments_list' %}?page={{ page_obj.previous_page_number }}"
                           aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                {% endif %}
                {% for page in page_obj.paginator.page_range %}
                    <li {% ifequal page page_obj.number %}class="active"{% endifequal %}><a href="{% url 'finances:payments_list' %}?page={{ page }}">{{ page }}</a></li>
                {% endfor %}
                {% if page_obj.has_next %}
                    <li>
                        <a href="{% url 'finances:payments_list' %}?page={{ page_obj.next_page_number }}"
                           aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                {% endif %}
            </ul>
        </nav>
        {% endif %}
    {% else %}
        <div class="alert alert-warning">
            <i class="fa fa-exclamation-circle"></i> Payments not found.
        </div>
    {% endif %}
{% endblock %}